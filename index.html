<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Monitor BSC - Saldo e Transa√ß√µes</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0d1117;
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 30px;
}
input, button {
  margin: 10px;
  padding: 10px;
  border-radius: 8px;
  border: none;
}
button {
  background: #00b36b;
  color: white;
  cursor: pointer;
}
button:hover {
  background: #00995c;
}
#resultado {
  margin-top: 20px;
  background: #161b22;
  padding: 20px;
  border-radius: 10px;
  width: 380px;
  text-align: center;
}
#transacoes {
  margin-top: 20px;
  background: #161b22;
  padding: 15px;
  border-radius: 10px;
  width: 380px;
  text-align: left;
}
.tx {
  border-bottom: 1px solid #333;
  padding: 8px 0;
}
small {
  color: #aaa;
}
</style>
</head>
<body>

<h2>Monitor de Carteira BSC</h2>

<input type="text" id="endereco" placeholder="Digite o endere√ßo da carteira" size="42" value="0x4A0153E289b475Fd8693f415C00813dC77b50E64">
<button onclick="carregarDados()">üîÑ Atualizar Agora</button>

<div id="resultado">Digite um endere√ßo e clique em ‚ÄúAtualizar Agora‚Äù.</div>
<div id="transacoes"></div>

<script>
const API_KEY = 'ESBZ6MIBSP39YA2PPTJDBYSG7N2IHH7QJA';
const COINGECKO_URL = 'https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd,brl';

async function obterPrecoBNB() {
  const resp = await fetch(COINGECKO_URL);
  const dados = await resp.json();
  return {
    usd: dados.binancecoin.usd,
    brl: dados.binancecoin.brl
  };
}

async function obterSaldo(endereco) {
  const url = `https://api.etherscan.io/v2/api?apikey=${API_KEY}&chainid=56&module=account&action=balance&address=${endereco}&tag=latest`;
  const resp = await fetch(url);
  const dados = await resp.json();
  if (dados.status === '1') {
    return Number(dados.result) / 1e18;
  } else {
    throw new Error(dados.message || 'Erro ao obter saldo');
  }
}

async function obterTransacoes(endereco) {
  const url = `https://api.etherscan.io/v2/api?apikey=${API_KEY}&chainid=56&module=account&action=txlist&address=${endereco}&page=1&offset=5&sort=desc`;
  const resp = await fetch(url);
  const dados = await resp.json();
  if (dados.status === '1') {
    return dados.result.slice(0, 5);
  } else {
    throw new Error('Erro ao carregar transa√ß√µes');
  }
}

async function carregarDados() {
  const endereco = document.getElementById('endereco').value.trim();
  const resultado = document.getElementById('resultado');
  const listaTx = document.getElementById('transacoes');

  if (!endereco) {
    resultado.innerHTML = '‚ö†Ô∏è Digite um endere√ßo v√°lido.';
    return;
  }

  resultado.innerHTML = '‚è≥ Atualizando dados...';
  listaTx.innerHTML = '';

  try {
    const [saldoBNB, preco, transacoes] = await Promise.all([
      obterSaldo(endereco),
      obterPrecoBNB(),
      obterTransacoes(endereco)
    ]);

    const saldoUSD = saldoBNB * preco.usd;
    const saldoBRL = saldoBNB * preco.brl;

    resultado.innerHTML = `
      üí∞ <b>${saldoBNB.toFixed(6)} BNB</b><br>
      üíµ USD: <b>$${saldoUSD.toFixed(2)}</b><br>
      üáßüá∑ BRL: <b>R$${saldoBRL.toFixed(2)}</b><br>
      <small>Atualizado: ${new Date().toLocaleTimeString()}</small>
    `;

    listaTx.innerHTML = `<h3>√öltimas 5 Transa√ß√µes:</h3>`;
    transacoes.forEach(tx => {
      const valorBNB = Number(tx.value) / 1e18;
      listaTx.innerHTML += `
        <div class="tx">
          üîπ <b>${valorBNB.toFixed(5)} BNB</b><br>
          De: <small>${tx.from}</small><br>
          Para: <small>${tx.to}</small><br>
          <small>Bloco: ${tx.blockNumber} | Hash: ${tx.hash.slice(0, 12)}...</small>
        </div>
      `;
    });

  } catch (erro) {
    console.error(erro);
    resultado.innerHTML = '‚ùå Erro ao carregar informa√ß√µes.';
  }
}

// Atualiza√ß√£o autom√°tica a cada 1 minuto
setInterval(carregarDados, 60000);
</script>

</body>
</html>
