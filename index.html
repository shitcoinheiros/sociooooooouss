<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Painel BNB Profissional</title>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --bg-color: #0b0f19;
  --card-bg: #111726;
  --text: #e0e6f1;
  --accent: #f3ba2f;
  --positive: #00ff88;
  --negative: #ff4d4d;
}
body {
  font-family: "Inter", Arial, sans-serif;
  background: var(--bg-color);
  color: var(--text);
  margin: 0;
  padding: 0;
}
header {
  background: linear-gradient(90deg, #f3ba2f, #e6a600);
  color: #0b0f19;
  padding: 18px;
  text-align: center;
  font-weight: 700;
  font-size: 1.4em;
  letter-spacing: 1px;
}
.container {
  max-width: 800px;
  margin: 20px auto;
  padding: 0 10px;
}
.card {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.4);
}
h3 {
  margin-top: 0;
  border-left: 4px solid var(--accent);
  padding-left: 8px;
  font-size: 1.1em;
  color: var(--accent);
}
#price-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 1.1em;
}
.price-up { color: var(--positive); }
.price-down { color: var(--negative); }

.tx {
  border-bottom: 1px solid #222;
  padding: 8px 0;
  font-size: 0.9em;
}
.tx small { color: #999; }

footer {
  text-align: center;
  color: #777;
  font-size: 0.8em;
  padding: 15px;
  margin-top: 30px;
}
canvas {
  width: 100% !important;
  height: 300px !important;
}
@media (max-width: 600px) {
  canvas { height: 220px !important; }
}
</style>
</head>
<body>

<header>ðŸ“Š Painel Profissional â€” BNB Tracker</header>

<div class="container">

  <div class="card">
    <h3>ðŸ’¹ CotaÃ§Ã£o e GrÃ¡fico BNB/USD (24h)</h3>
    <div id="price-info">Carregando...</div>
    <canvas id="chartBNB"></canvas>
  </div>

  <div class="card" id="saldo">
    <h3>ðŸ’° Saldo da Carteira</h3>
    <div id="saldo-info">Aguardando atualizaÃ§Ã£o...</div>
  </div>

  <div class="card" id="transacoes">
    <h3>ðŸ§¾ Ãšltimas 5 TransaÃ§Ãµes</h3>
    <div id="tx-list">Carregando...</div>
  </div>

</div>

<footer>Atualizado automaticamente a cada 1 minuto â€¢ Dados via CoinGecko & BscScan</footer>

<script>
const ADDRESS = "0x4A0153E289b475Fd8693f415C00813dC77b50E64";
const API_KEY = "ESBZ6MIBSP39YA2PPTJDBYSG7N2IHH7QJA";
let chart;

// ======== ðŸ”¹ FunÃ§Ãµes utilitÃ¡rias ========
function formatNumber(num, dec = 2) {
  return Number(num).toLocaleString("pt-BR", { minimumFractionDigits: dec, maximumFractionDigits: dec });
}
function weiToBNB(wei) { return Number(wei) / 1e18; }

// ======== ðŸ”¹ Dados de PreÃ§o e GrÃ¡fico ========
async function getBNBPrice() {
  const url = "https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd,brl&include_24hr_change=true";
  const res = await fetch(url);
  const data = await res.json();
  return data.binancecoin;
}

async function getBNBChart() {
  const res = await fetch("https://api.coingecko.com/api/v3/coins/binancecoin/market_chart?vs_currency=usd&days=1");
  const data = await res.json();
  return data.prices.map(p => ({ time: new Date(p[0]).toLocaleTimeString("pt-BR", { hour: '2-digit', minute: '2-digit' }), price: p[1] }));
}

// ======== ðŸ”¹ BscScan API ========
async function getBalance() {
  const url = `https://api.etherscan.io/v2/api?apikey=${API_KEY}&chainid=56&module=account&action=balance&address=${ADDRESS}&tag=latest`;
  const res = await fetch(url);
  const data = await res.json();
  return data.status === "1" ? weiToBNB(data.result) : 0;
}

async function getTransactions() {
  const url = `https://api.etherscan.io/v2/api?apikey=${API_KEY}&chainid=56&module=account&action=txlist&address=${ADDRESS}&page=1&offset=5&sort=desc`;
  const res = await fetch(url);
  const data = await res.json();
  return data.status === "1" ? data.result.slice(0,5) : [];
}

// ======== ðŸ”¹ Atualiza cotaÃ§Ã£o ========
async function updatePrice() {
  const info = document.getElementById("price-info");
  const price = await getBNBPrice();
  const change = price.usd_24h_change;
  const cor = change >= 0 ? "price-up" : "price-down";
  info.innerHTML = `
    <div><b>$${formatNumber(price.usd)}</b> / R$${formatNumber(price.brl)}</div>
    <div class="${cor}">${change >= 0 ? "â–²" : "â–¼"} ${formatNumber(change)}%</div>
  `;
}

// ======== ðŸ”¹ Atualiza grÃ¡fico ========
async function renderChart() {
  const data = await getBNBChart();
  const ctx = document.getElementById("chartBNB").getContext("2d");
  if (chart) chart.destroy();
  chart = new Chart(ctx, {
    type: "line",
    data: {
      labels: data.map(d => d.time),
      datasets: [{
        label: "PreÃ§o BNB (USD)",
        data: data.map(d => d.price),
        borderColor: "#f3ba2f",
        backgroundColor: "rgba(243,186,47,0.1)",
        tension: 0.3,
        fill: true
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: {
        x: { display: false },
        y: {
          ticks: { color: "#ccc" },
          grid: { color: "rgba(255,255,255,0.05)" }
        }
      }
    }
  });
}

// ======== ðŸ”¹ Atualiza saldo e transaÃ§Ãµes ========
async function updateWallet() {
  const saldoEl = document.getElementById("saldo-info");
  const txEl = document.getElementById("tx-list");
  saldoEl.innerHTML = "Atualizando...";
  const [balanceBNB, price, txs] = await Promise.all([getBalance(), getBNBPrice(), getTransactions()]);
  const saldoUSD = balanceBNB * price.usd;
  const saldoBRL = balanceBNB * price.brl;
  saldoEl.innerHTML = `
    <b>${formatNumber(balanceBNB,6)} BNB</b><br>
    ðŸ’µ USD: $${formatNumber(saldoUSD)}<br>
    ðŸ‡§ðŸ‡· BRL: R$${formatNumber(saldoBRL)}<br>
    <small>Atualizado: ${new Date().toLocaleTimeString()}</small>
  `;
  txEl.innerHTML = "";
  if (txs.length === 0) txEl.innerHTML = "<i>Nenhuma transaÃ§Ã£o recente.</i>";
  else txs.forEach(tx => {
    txEl.innerHTML += `
      <div class="tx">
        ðŸ”¹ <b>${formatNumber(weiToBNB(tx.value),5)} BNB</b><br>
        <small>De: ${tx.from.slice(0,6)}...${tx.from.slice(-4)}</small><br>
        <small>Para: ${tx.to.slice(0,6)}...${tx.to.slice(-4)}</small><br>
        <small><a href="https://bscscan.com/tx/${tx.hash}" target="_blank" style="color:#f3ba2f;">Ver TX</a></small>
      </div>
    `;
  });
}

// ======== ðŸ”¹ Loop de atualizaÃ§Ã£o ========
async function atualizarPainel() {
  await Promise.all([
    updatePrice(),
    updateWallet(),
    renderChart()
  ]);
}
atualizarPainel();
setInterval(atualizarPainel, 60000);
setInterval(updatePrice, 15000);
</script>

</body>
</html>
